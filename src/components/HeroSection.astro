<section
  id="inicio"
  class="relative h-[75vh] sm:h-[80vh] flex items-center justify-center overflow-hidden"
  aria-labelledby="header-title"
>
  <!-- Imagen del póster visible para LCP -->
  <picture>
    <source
      srcset="/assets/video/portada-480.webp 480w,
            /assets/video/portada-768.webp 768w,
            /assets/video/portada-1280.webp 1280w,
            /assets/video/portada.webp 1920w"
      sizes="100vw"
      type="image/webp"
    />
    <img
      src="/assets/video/portada.webp"
      alt="Ciberseguridad Nyxion"
      width="1920"
      height="1080"
      fetchpriority="high"
      decoding="async"
      loading="eager"
      class="absolute inset-0 w-full h-full object-cover will-change-transform"
    />
  </picture>

  <!-- Capa oscura sobre la imagen (no bloqueante) -->
  <div class="absolute inset-0 bg-black/60 z-[1]"></div>

  <!-- Vídeo: renderizado asíncrono -->
  <video
    id="hero-video"
    aria-hidden="true"
    class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-700 pointer-events-none z-[0]"
    poster="/assets/video/portada.webp"
    muted
    playsinline
    preload="none"
    loop
  >
    <source src="/assets/video/portada.mp4" type="video/mp4" />
  </video>

  <!-- Contenido centrado -->
  <div class="relative z-10 text-center px-4">
    <h1
      id="header-title"
      class="!text-4xl sm:!text-5xl font-extrabold text-white text-center"
    >
      Tu defensa digital empieza aquí
    </h1>

    <p class="mt-3 text-lg sm:text-xl font-semibold italic text-white/90">
      “Seguridad en casa. Seguridad en el trabajo. Para particulares y
      empresas.”
    </p>

    <p class="mt-3 text-base text-gray-300 max-w-2xl mx-auto">
      En Nyxion protegemos a particulares y todo tipo de empresas frente a las
      amenazas cibernéticas. Desde auditorías web hasta monitorización 24/7 y
      respuesta ante incidentes, te ayudamos a mantener tu entorno personal o
      empresarial seguro y en funcionamiento.
    </p>

    <div class="mt-8">
      <a
        href="#servicios"
        class="bg-[#0070A3] hover:bg-[#00648F] text-white px-6 py-3 rounded-lg shadow-lg transition-all"
      >
        Conoce nuestros servicios
      </a>
    </div>
  </div>
</section>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const video = document.getElementById("hero-video");

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          // Retraso ligero para que la imagen del poster sea visible primero
          setTimeout(() => {
            video.classList.replace("opacity-0", "opacity-100");
            video.play().catch(() => {});
          }, 300);
          observer.disconnect();
        }
      },
      { rootMargin: "300px" },
    );

    observer.observe(video);
  });
</script>
